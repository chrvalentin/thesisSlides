import{K as Tt,aL as re,L as Zt,r as U,z as N,f as Qt,aM as ie,am as le,E as he,i as tt,o as Q,e as ot,aN as Ot,J as ue,aO as ce,j,T as G,b as Ct,w as Lt,n as $t,g as fe,k as de}from"./modules/vue-mwjV2177.js";import{K as wt,am as Ut,X as Et,W as Dt,a as pe}from"./index-DLT5fFau.js";const ge=["center","top","bottom","left","right","topleft","topright","bottomleft","bottomright"],ye=new Set(ge),K={value:0,unit:"px"},me=/(?<value>[+-]?\d+)(?<unit>%|px)?/,ve=/^\(\s*(?<x>\S+)\s*,\s*(?<y>\S+)\s*\)$/,Me=/^(?<query>[^@]+?)(@\s*(?<snapPosition>.+?))?$/;function lt(a){const t=a.match(me);if(!t)return;const s=parseInt(t.groups?.value??"0",10),e=t.groups?.unit??"px";return{value:s,unit:e}}function Kt(a){const t=a.match(ve);if(!t)return;const s=lt(t.groups?.x??"")??K,e=lt(t.groups?.y??"")??K;return{x:s,y:e}}function Mt(a){return ye.has(a)?a:Kt(a)}function ke(a){a=a.trim();const t=Kt(a);if(t)return t;const s=a.match(Me);if(s){const e=s.groups?.query;if(!e)throw new Error(`Invalid arrow endpoint format: missing query group in "${a}"`);const n=s.groups?.snapPosition;return{query:e.trim(),snapPosition:n?Mt(n):void 0}}throw new Error(`Invalid arrow endpoint format: ${a}`)}function _t(a){if(a.shorthand)try{return ke(a.shorthand)}catch(t){console.error(`Failed to parse shorthand "${a.shorthand}":`,t);return}if(a.q)return{query:a.q,snapPosition:a.pos?Mt(a.pos):void 0};if(a.id)return{query:`#${a.id}`,snapPosition:a.pos?Mt(a.pos):void 0};if(a.x!=null||a.y!=null)return{x:typeof a.x=="number"?{value:a.x,unit:"px"}:typeof a.x=="string"?lt(a.x)??K:K,y:typeof a.y=="number"?{value:a.y,unit:"px"}:typeof a.y=="string"?lt(a.y)??K:K}}function xe(a,t){const s=a.x+a.width/2,e=a.y+a.height/2;if(a.width===0)return{x:s,y:Math.max(a.y,Math.min(a.y+a.height,t.y))};if(a.height===0)return{x:Math.max(a.x,Math.min(a.x+a.width,t.x)),y:e};const n=t.x-s,o=t.y-e;if(n===0&&o===0)return{x:s,y:e};if(Math.abs(n/o)>a.width/a.height){const i=n>0?a.x+a.width:a.x,r=e+(i-s)*o/n;return{x:i,y:r}}else{const i=o>0?a.y+a.height:a.y;return{x:s+(i-e)*n/o,y:i}}}function V(a,t){return a.unit==="px"?a.value:a.unit==="%"?a.value/100*t:(console.warn(`Unknown length percentage unit: ${a.unit}`),0)}function It(a,t){const{$scale:s}=wt(),e=Ut(),n=U(void 0),o=()=>{if(t.value==null||"x"in t.value)return;const i=t.value,{element:r,snapPosition:l}=i;if(!a.value||!r){n.value=void 0;return}const h=r.getBoundingClientRect(),u=a.value.getBoundingClientRect(),p=(h.left-u.left)/s.value,c=(h.top-u.top)/s.value,f=h.width/s.value,d=h.height/s.value;n.value&&"rect"in n.value&&n.value.rect.x===p&&n.value.rect.y===c&&n.value.rect.width===f&&n.value.rect.height===d||(n.value={rect:{x:p,y:c,width:f,height:d},snapPosition:l})};return Tt(e,()=>{setTimeout(()=>{o()})}),Tt(t,i=>{if(i!=null){if("x"in i)n.value=i;else if(i.element){const r=new MutationObserver(o);r.observe(i.element,{attributes:!0}),re(()=>{r.disconnect()})}}},{immediate:!0}),Zt(()=>{o();const i=setInterval(()=>{o()},100);return()=>clearInterval(i)}),n}function qt(a,t){return N(s=>{if(a.value!=null){if("x"in a.value)return{x:V(a.value.x,Dt.value),y:V(a.value.y,Et.value)};{const{snapPosition:e,rect:n}=a.value;let o=n.x,i=n.y;if(e==null&&t.value){const r="x"in t.value?V(t.value.x,Dt.value):t.value.rect.x+t.value.rect.width/2,l="y"in t.value?V(t.value.y,Et.value):t.value.rect.y+t.value.rect.height/2,h=xe(n,{x:r,y:l});o=h.x,i=h.y}return typeof e=="string"?(e.includes("right")?o+=n.width:e.includes("left")||(o+=n.width/2),e.includes("bottom")?i+=n.height:e.includes("top")||(i+=n.height/2)):typeof e=="object"&&(o+=V(e.x,n.width),i+=V(e.y,n.height)),s?.x===o&&s?.y===i?s:{x:o,y:i}}}})}function pt(a,t,s){if(a&&a.length){const[e,n]=t,o=Math.PI/180*s,i=Math.cos(o),r=Math.sin(o);for(const l of a){const[h,u]=l;l[0]=(h-e)*i-(u-n)*r+e,l[1]=(h-e)*r+(u-n)*i+n}}}function be(a,t){return a[0]===t[0]&&a[1]===t[1]}function we(a,t,s,e=1){const n=s,o=Math.max(t,.1),i=a[0]&&a[0][0]&&typeof a[0][0]=="number"?[a]:a,r=[0,0];if(n)for(const h of i)pt(h,r,n);const l=(function(h,u,p){const c=[];for(const y of h){const x=[...y];be(x[0],x[x.length-1])||x.push([x[0][0],x[0][1]]),x.length>2&&c.push(x)}const f=[];u=Math.max(u,.1);const d=[];for(const y of c)for(let x=0;x<y.length-1;x++){const M=y[x],b=y[x+1];if(M[1]!==b[1]){const w=Math.min(M[1],b[1]);d.push({ymin:w,ymax:Math.max(M[1],b[1]),x:w===M[1]?M[0]:b[0],islope:(b[0]-M[0])/(b[1]-M[1])})}}if(d.sort(((y,x)=>y.ymin<x.ymin?-1:y.ymin>x.ymin?1:y.x<x.x?-1:y.x>x.x?1:y.ymax===x.ymax?0:(y.ymax-x.ymax)/Math.abs(y.ymax-x.ymax))),!d.length)return f;let g=[],m=d[0].ymin,v=0;for(;g.length||d.length;){if(d.length){let y=-1;for(let x=0;x<d.length&&!(d[x].ymin>m);x++)y=x;d.splice(0,y+1).forEach((x=>{g.push({s:m,edge:x})}))}if(g=g.filter((y=>!(y.edge.ymax<=m))),g.sort(((y,x)=>y.edge.x===x.edge.x?0:(y.edge.x-x.edge.x)/Math.abs(y.edge.x-x.edge.x))),(p!==1||v%u==0)&&g.length>1)for(let y=0;y<g.length;y+=2){const x=y+1;if(x>=g.length)break;const M=g[y].edge,b=g[x].edge;f.push([[Math.round(M.x),m],[Math.round(b.x),m]])}m+=p,g.forEach((y=>{y.edge.x=y.edge.x+p*y.edge.islope})),v++}return f})(i,o,e);if(n){for(const h of i)pt(h,r,-n);(function(h,u,p){const c=[];h.forEach((f=>c.push(...f))),pt(c,u,p)})(l,r,-n)}return l}function et(a,t){var s;const e=t.hachureAngle+90;let n=t.hachureGap;n<0&&(n=4*t.strokeWidth),n=Math.round(Math.max(n,.1));let o=1;return t.roughness>=1&&(((s=t.randomizer)===null||s===void 0?void 0:s.next())||Math.random())>.7&&(o=n),we(a,n,e,o||1)}class Pt{constructor(t){this.helper=t}fillPolygons(t,s){return this._fillPolygons(t,s)}_fillPolygons(t,s){const e=et(t,s);return{type:"fillSketch",ops:this.renderLines(e,s)}}renderLines(t,s){const e=[];for(const n of t)e.push(...this.helper.doubleLineOps(n[0][0],n[0][1],n[1][0],n[1][1],s));return e}}function dt(a){const t=a[0],s=a[1];return Math.sqrt(Math.pow(t[0]-s[0],2)+Math.pow(t[1]-s[1],2))}class Pe extends Pt{fillPolygons(t,s){let e=s.hachureGap;e<0&&(e=4*s.strokeWidth),e=Math.max(e,.1);const n=et(t,Object.assign({},s,{hachureGap:e})),o=Math.PI/180*s.hachureAngle,i=[],r=.5*e*Math.cos(o),l=.5*e*Math.sin(o);for(const[h,u]of n)dt([h,u])&&i.push([[h[0]-r,h[1]+l],[...u]],[[h[0]+r,h[1]-l],[...u]]);return{type:"fillSketch",ops:this.renderLines(i,s)}}}class Se extends Pt{fillPolygons(t,s){const e=this._fillPolygons(t,s),n=Object.assign({},s,{hachureAngle:s.hachureAngle+90}),o=this._fillPolygons(t,n);return e.ops=e.ops.concat(o.ops),e}}class Ae{constructor(t){this.helper=t}fillPolygons(t,s){const e=et(t,s=Object.assign({},s,{hachureAngle:0}));return this.dotsOnLines(e,s)}dotsOnLines(t,s){const e=[];let n=s.hachureGap;n<0&&(n=4*s.strokeWidth),n=Math.max(n,.1);let o=s.fillWeight;o<0&&(o=s.strokeWidth/2);const i=n/4;for(const r of t){const l=dt(r),h=l/n,u=Math.ceil(h)-1,p=l-u*n,c=(r[0][0]+r[1][0])/2-n/4,f=Math.min(r[0][1],r[1][1]);for(let d=0;d<u;d++){const g=f+p+d*n,m=c-i+2*Math.random()*i,v=g-i+2*Math.random()*i,y=this.helper.ellipse(m,v,o,o,s);e.push(...y.ops)}}return{type:"fillSketch",ops:e}}}class Te{constructor(t){this.helper=t}fillPolygons(t,s){const e=et(t,s);return{type:"fillSketch",ops:this.dashedLine(e,s)}}dashedLine(t,s){const e=s.dashOffset<0?s.hachureGap<0?4*s.strokeWidth:s.hachureGap:s.dashOffset,n=s.dashGap<0?s.hachureGap<0?4*s.strokeWidth:s.hachureGap:s.dashGap,o=[];return t.forEach((i=>{const r=dt(i),l=Math.floor(r/(e+n)),h=(r+n-l*(e+n))/2;let u=i[0],p=i[1];u[0]>p[0]&&(u=i[1],p=i[0]);const c=Math.atan((p[1]-u[1])/(p[0]-u[0]));for(let f=0;f<l;f++){const d=f*(e+n),g=d+e,m=[u[0]+d*Math.cos(c)+h*Math.cos(c),u[1]+d*Math.sin(c)+h*Math.sin(c)],v=[u[0]+g*Math.cos(c)+h*Math.cos(c),u[1]+g*Math.sin(c)+h*Math.sin(c)];o.push(...this.helper.doubleLineOps(m[0],m[1],v[0],v[1],s))}})),o}}class Oe{constructor(t){this.helper=t}fillPolygons(t,s){const e=s.hachureGap<0?4*s.strokeWidth:s.hachureGap,n=s.zigzagOffset<0?e:s.zigzagOffset,o=et(t,s=Object.assign({},s,{hachureGap:e+n}));return{type:"fillSketch",ops:this.zigzagLines(o,n,s)}}zigzagLines(t,s,e){const n=[];return t.forEach((o=>{const i=dt(o),r=Math.round(i/(2*s));let l=o[0],h=o[1];l[0]>h[0]&&(l=o[1],h=o[0]);const u=Math.atan((h[1]-l[1])/(h[0]-l[0]));for(let p=0;p<r;p++){const c=2*p*s,f=2*(p+1)*s,d=Math.sqrt(2*Math.pow(s,2)),g=[l[0]+c*Math.cos(u),l[1]+c*Math.sin(u)],m=[l[0]+f*Math.cos(u),l[1]+f*Math.sin(u)],v=[g[0]+d*Math.cos(u+Math.PI/4),g[1]+d*Math.sin(u+Math.PI/4)];n.push(...this.helper.doubleLineOps(g[0],g[1],v[0],v[1],e),...this.helper.doubleLineOps(v[0],v[1],m[0],m[1],e))}})),n}}const I={};class Ce{constructor(t){this.seed=t}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const Le=0,gt=1,Nt=2,st={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function yt(a,t){return a.type===t}function St(a){const t=[],s=(function(i){const r=new Array;for(;i!=="";)if(i.match(/^([ \t\r\n,]+)/))i=i.substr(RegExp.$1.length);else if(i.match(/^([aAcChHlLmMqQsStTvVzZ])/))r[r.length]={type:Le,text:RegExp.$1},i=i.substr(RegExp.$1.length);else{if(!i.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];r[r.length]={type:gt,text:`${parseFloat(RegExp.$1)}`},i=i.substr(RegExp.$1.length)}return r[r.length]={type:Nt,text:""},r})(a);let e="BOD",n=0,o=s[n];for(;!yt(o,Nt);){let i=0;const r=[];if(e==="BOD"){if(o.text!=="M"&&o.text!=="m")return St("M0,0"+a);n++,i=st[o.text],e=o.text}else yt(o,gt)?i=st[e]:(n++,i=st[o.text],e=o.text);if(!(n+i<s.length))throw new Error("Path data ended short");for(let l=n;l<n+i;l++){const h=s[l];if(!yt(h,gt))throw new Error("Param not a number: "+e+","+h.text);r[r.length]=+h.text}if(typeof st[e]!="number")throw new Error("Bad segment: "+e);{const l={key:e,data:r};t.push(l),n+=i,o=s[n],e==="M"&&(e="L"),e==="m"&&(e="l")}}return t}function Jt(a){let t=0,s=0,e=0,n=0;const o=[];for(const{key:i,data:r}of a)switch(i){case"M":o.push({key:"M",data:[...r]}),[t,s]=r,[e,n]=r;break;case"m":t+=r[0],s+=r[1],o.push({key:"M",data:[t,s]}),e=t,n=s;break;case"L":o.push({key:"L",data:[...r]}),[t,s]=r;break;case"l":t+=r[0],s+=r[1],o.push({key:"L",data:[t,s]});break;case"C":o.push({key:"C",data:[...r]}),t=r[4],s=r[5];break;case"c":{const l=r.map(((h,u)=>u%2?h+s:h+t));o.push({key:"C",data:l}),t=l[4],s=l[5];break}case"Q":o.push({key:"Q",data:[...r]}),t=r[2],s=r[3];break;case"q":{const l=r.map(((h,u)=>u%2?h+s:h+t));o.push({key:"Q",data:l}),t=l[2],s=l[3];break}case"A":o.push({key:"A",data:[...r]}),t=r[5],s=r[6];break;case"a":t+=r[5],s+=r[6],o.push({key:"A",data:[r[0],r[1],r[2],r[3],r[4],t,s]});break;case"H":o.push({key:"H",data:[...r]}),t=r[0];break;case"h":t+=r[0],o.push({key:"H",data:[t]});break;case"V":o.push({key:"V",data:[...r]}),s=r[0];break;case"v":s+=r[0],o.push({key:"V",data:[s]});break;case"S":o.push({key:"S",data:[...r]}),t=r[2],s=r[3];break;case"s":{const l=r.map(((h,u)=>u%2?h+s:h+t));o.push({key:"S",data:l}),t=l[2],s=l[3];break}case"T":o.push({key:"T",data:[...r]}),t=r[0],s=r[1];break;case"t":t+=r[0],s+=r[1],o.push({key:"T",data:[t,s]});break;case"Z":case"z":o.push({key:"Z",data:[]}),t=e,s=n}return o}function Xt(a){const t=[];let s="",e=0,n=0,o=0,i=0,r=0,l=0;for(const{key:h,data:u}of a){switch(h){case"M":t.push({key:"M",data:[...u]}),[e,n]=u,[o,i]=u;break;case"C":t.push({key:"C",data:[...u]}),e=u[4],n=u[5],r=u[2],l=u[3];break;case"L":t.push({key:"L",data:[...u]}),[e,n]=u;break;case"H":e=u[0],t.push({key:"L",data:[e,n]});break;case"V":n=u[0],t.push({key:"L",data:[e,n]});break;case"S":{let p=0,c=0;s==="C"||s==="S"?(p=e+(e-r),c=n+(n-l)):(p=e,c=n),t.push({key:"C",data:[p,c,...u]}),r=u[0],l=u[1],e=u[2],n=u[3];break}case"T":{const[p,c]=u;let f=0,d=0;s==="Q"||s==="T"?(f=e+(e-r),d=n+(n-l)):(f=e,d=n);const g=e+2*(f-e)/3,m=n+2*(d-n)/3,v=p+2*(f-p)/3,y=c+2*(d-c)/3;t.push({key:"C",data:[g,m,v,y,p,c]}),r=f,l=d,e=p,n=c;break}case"Q":{const[p,c,f,d]=u,g=e+2*(p-e)/3,m=n+2*(c-n)/3,v=f+2*(p-f)/3,y=d+2*(c-d)/3;t.push({key:"C",data:[g,m,v,y,f,d]}),r=p,l=c,e=f,n=d;break}case"A":{const p=Math.abs(u[0]),c=Math.abs(u[1]),f=u[2],d=u[3],g=u[4],m=u[5],v=u[6];p===0||c===0?(t.push({key:"C",data:[e,n,m,v,m,v]}),e=m,n=v):(e!==m||n!==v)&&(Yt(e,n,m,v,p,c,f,d,g).forEach((function(y){t.push({key:"C",data:y})})),e=m,n=v);break}case"Z":t.push({key:"Z",data:[]}),e=o,n=i}s=h}return t}function X(a,t,s){return[a*Math.cos(s)-t*Math.sin(s),a*Math.sin(s)+t*Math.cos(s)]}function Yt(a,t,s,e,n,o,i,r,l,h){const u=(p=i,Math.PI*p/180);var p;let c=[],f=0,d=0,g=0,m=0;if(h)[f,d,g,m]=h;else{[a,t]=X(a,t,-u),[s,e]=X(s,e,-u);const L=(a-s)/2,T=(t-e)/2;let D=L*L/(n*n)+T*T/(o*o);D>1&&(D=Math.sqrt(D),n*=D,o*=D);const O=n*n,$=o*o,W=O*$-O*T*T-$*L*L,_=O*T*T+$*L*L,z=(r===l?-1:1)*Math.sqrt(Math.abs(W/_));g=z*n*T/o+(a+s)/2,m=z*-o*L/n+(t+e)/2,f=Math.asin(parseFloat(((t-m)/o).toFixed(9))),d=Math.asin(parseFloat(((e-m)/o).toFixed(9))),a<g&&(f=Math.PI-f),s<g&&(d=Math.PI-d),f<0&&(f=2*Math.PI+f),d<0&&(d=2*Math.PI+d),l&&f>d&&(f-=2*Math.PI),!l&&d>f&&(d-=2*Math.PI)}let v=d-f;if(Math.abs(v)>120*Math.PI/180){const L=d,T=s,D=e;d=l&&d>f?f+120*Math.PI/180*1:f+120*Math.PI/180*-1,c=Yt(s=g+n*Math.cos(d),e=m+o*Math.sin(d),T,D,n,o,i,0,l,[d,L,g,m])}v=d-f;const y=Math.cos(f),x=Math.sin(f),M=Math.cos(d),b=Math.sin(d),w=Math.tan(v/4),A=4/3*n*w,P=4/3*o*w,S=[a,t],C=[a+A*x,t-P*y],E=[s+A*b,e-P*M],R=[s,e];if(C[0]=2*S[0]-C[0],C[1]=2*S[1]-C[1],h)return[C,E,R].concat(c);{c=[C,E,R].concat(c);const L=[];for(let T=0;T<c.length;T+=3){const D=X(c[T][0],c[T][1],u),O=X(c[T+1][0],c[T+1][1],u),$=X(c[T+2][0],c[T+2][1],u);L.push([D[0],D[1],O[0],O[1],$[0],$[1]])}return L}}const $e={randOffset:function(a,t){return k(a,t)},randOffsetWithRange:function(a,t,s){return ht(a,t,s)},ellipse:function(a,t,s,e,n){const o=ee(s,e,n);return kt(a,t,n,o).opset},doubleLineOps:function(a,t,s,e,n){return H(a,t,s,e,n,!0)}};function te(a,t,s,e,n){return{type:"path",ops:H(a,t,s,e,n)}}function rt(a,t,s){const e=(a||[]).length;if(e>2){const n=[];for(let o=0;o<e-1;o++)n.push(...H(a[o][0],a[o][1],a[o+1][0],a[o+1][1],s));return t&&n.push(...H(a[e-1][0],a[e-1][1],a[0][0],a[0][1],s)),{type:"path",ops:n}}return e===2?te(a[0][0],a[0][1],a[1][0],a[1][1],s):{type:"path",ops:[]}}function Ee(a,t,s,e,n){return(function(o,i){return rt(o,!0,i)})([[a,t],[a+s,t],[a+s,t+e],[a,t+e]],n)}function Wt(a,t){if(a.length){const s=typeof a[0][0]=="number"?[a]:a,e=nt(s[0],1*(1+.2*t.roughness),t),n=t.disableMultiStroke?[]:nt(s[0],1.5*(1+.22*t.roughness),Ht(t));for(let o=1;o<s.length;o++){const i=s[o];if(i.length){const r=nt(i,1*(1+.2*t.roughness),t),l=t.disableMultiStroke?[]:nt(i,1.5*(1+.22*t.roughness),Ht(t));for(const h of r)h.op!=="move"&&e.push(h);for(const h of l)h.op!=="move"&&n.push(h)}}return{type:"path",ops:e.concat(n)}}return{type:"path",ops:[]}}function ee(a,t,s){const e=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(a/2,2)+Math.pow(t/2,2))/2)),n=Math.ceil(Math.max(s.curveStepCount,s.curveStepCount/Math.sqrt(200)*e)),o=2*Math.PI/n;let i=Math.abs(a/2),r=Math.abs(t/2);const l=1-s.curveFitting;return i+=k(i*l,s),r+=k(r*l,s),{increment:o,rx:i,ry:r}}function kt(a,t,s,e){const[n,o]=Gt(e.increment,a,t,e.rx,e.ry,1,e.increment*ht(.1,ht(.4,1,s),s),s);let i=ut(n,null,s);if(!s.disableMultiStroke&&s.roughness!==0){const[r]=Gt(e.increment,a,t,e.rx,e.ry,1.5,0,s),l=ut(r,null,s);i=i.concat(l)}return{estimatedPoints:o,opset:{type:"path",ops:i}}}function zt(a,t,s,e,n,o,i,r,l){const h=a,u=t;let p=Math.abs(s/2),c=Math.abs(e/2);p+=k(.01*p,l),c+=k(.01*c,l);let f=n,d=o;for(;f<0;)f+=2*Math.PI,d+=2*Math.PI;d-f>2*Math.PI&&(f=0,d=2*Math.PI);const g=2*Math.PI/l.curveStepCount,m=Math.min(g/2,(d-f)/2),v=Ft(m,h,u,p,c,f,d,1,l);if(!l.disableMultiStroke){const y=Ft(m,h,u,p,c,f,d,1.5,l);v.push(...y)}return i&&(r?v.push(...H(h,u,h+p*Math.cos(f),u+c*Math.sin(f),l),...H(h,u,h+p*Math.cos(d),u+c*Math.sin(d),l)):v.push({op:"lineTo",data:[h,u]},{op:"lineTo",data:[h+p*Math.cos(f),u+c*Math.sin(f)]})),{type:"path",ops:v}}function Rt(a,t){const s=Xt(Jt(St(a))),e=[];let n=[0,0],o=[0,0];for(const{key:i,data:r}of s)switch(i){case"M":o=[r[0],r[1]],n=[r[0],r[1]];break;case"L":e.push(...H(o[0],o[1],r[0],r[1],t)),o=[r[0],r[1]];break;case"C":{const[l,h,u,p,c,f]=r;e.push(...De(l,h,u,p,c,f,o,t)),o=[c,f];break}case"Z":e.push(...H(o[0],o[1],n[0],n[1],t)),o=[n[0],n[1]]}return{type:"path",ops:e}}function mt(a,t){const s=[];for(const e of a)if(e.length){const n=t.maxRandomnessOffset||0,o=e.length;if(o>2){s.push({op:"move",data:[e[0][0]+k(n,t),e[0][1]+k(n,t)]});for(let i=1;i<o;i++)s.push({op:"lineTo",data:[e[i][0]+k(n,t),e[i][1]+k(n,t)]})}}return{type:"fillPath",ops:s}}function Z(a,t){return(function(s,e){let n=s.fillStyle||"hachure";if(!I[n])switch(n){case"zigzag":I[n]||(I[n]=new Pe(e));break;case"cross-hatch":I[n]||(I[n]=new Se(e));break;case"dots":I[n]||(I[n]=new Ae(e));break;case"dashed":I[n]||(I[n]=new Te(e));break;case"zigzag-line":I[n]||(I[n]=new Oe(e));break;default:n="hachure",I[n]||(I[n]=new Pt(e))}return I[n]})(t,$e).fillPolygons(a,t)}function Ht(a){const t=Object.assign({},a);return t.randomizer=void 0,a.seed&&(t.seed=a.seed+1),t}function se(a){return a.randomizer||(a.randomizer=new Ce(a.seed||0)),a.randomizer.next()}function ht(a,t,s,e=1){return s.roughness*e*(se(s)*(t-a)+a)}function k(a,t,s=1){return ht(-a,a,t,s)}function H(a,t,s,e,n,o=!1){const i=o?n.disableMultiStrokeFill:n.disableMultiStroke,r=xt(a,t,s,e,n,!0,!1);if(i)return r;const l=xt(a,t,s,e,n,!0,!0);return r.concat(l)}function xt(a,t,s,e,n,o,i){const r=Math.pow(a-s,2)+Math.pow(t-e,2),l=Math.sqrt(r);let h=1;h=l<200?1:l>500?.4:-.0016668*l+1.233334;let u=n.maxRandomnessOffset||0;u*u*100>r&&(u=l/10);const p=u/2,c=.2+.2*se(n);let f=n.bowing*n.maxRandomnessOffset*(e-t)/200,d=n.bowing*n.maxRandomnessOffset*(a-s)/200;f=k(f,n,h),d=k(d,n,h);const g=[],m=()=>k(p,n,h),v=()=>k(u,n,h),y=n.preserveVertices;return i?g.push({op:"move",data:[a+(y?0:m()),t+(y?0:m())]}):g.push({op:"move",data:[a+(y?0:k(u,n,h)),t+(y?0:k(u,n,h))]}),i?g.push({op:"bcurveTo",data:[f+a+(s-a)*c+m(),d+t+(e-t)*c+m(),f+a+2*(s-a)*c+m(),d+t+2*(e-t)*c+m(),s+(y?0:m()),e+(y?0:m())]}):g.push({op:"bcurveTo",data:[f+a+(s-a)*c+v(),d+t+(e-t)*c+v(),f+a+2*(s-a)*c+v(),d+t+2*(e-t)*c+v(),s+(y?0:v()),e+(y?0:v())]}),g}function nt(a,t,s){if(!a.length)return[];const e=[];e.push([a[0][0]+k(t,s),a[0][1]+k(t,s)]),e.push([a[0][0]+k(t,s),a[0][1]+k(t,s)]);for(let n=1;n<a.length;n++)e.push([a[n][0]+k(t,s),a[n][1]+k(t,s)]),n===a.length-1&&e.push([a[n][0]+k(t,s),a[n][1]+k(t,s)]);return ut(e,null,s)}function ut(a,t,s){const e=a.length,n=[];if(e>3){const o=[],i=1-s.curveTightness;n.push({op:"move",data:[a[1][0],a[1][1]]});for(let r=1;r+2<e;r++){const l=a[r];o[0]=[l[0],l[1]],o[1]=[l[0]+(i*a[r+1][0]-i*a[r-1][0])/6,l[1]+(i*a[r+1][1]-i*a[r-1][1])/6],o[2]=[a[r+1][0]+(i*a[r][0]-i*a[r+2][0])/6,a[r+1][1]+(i*a[r][1]-i*a[r+2][1])/6],o[3]=[a[r+1][0],a[r+1][1]],n.push({op:"bcurveTo",data:[o[1][0],o[1][1],o[2][0],o[2][1],o[3][0],o[3][1]]})}}else e===3?(n.push({op:"move",data:[a[1][0],a[1][1]]}),n.push({op:"bcurveTo",data:[a[1][0],a[1][1],a[2][0],a[2][1],a[2][0],a[2][1]]})):e===2&&n.push(...xt(a[0][0],a[0][1],a[1][0],a[1][1],s,!0,!0));return n}function Gt(a,t,s,e,n,o,i,r){const l=[],h=[];if(r.roughness===0){a/=4,h.push([t+e*Math.cos(-a),s+n*Math.sin(-a)]);for(let u=0;u<=2*Math.PI;u+=a){const p=[t+e*Math.cos(u),s+n*Math.sin(u)];l.push(p),h.push(p)}h.push([t+e*Math.cos(0),s+n*Math.sin(0)]),h.push([t+e*Math.cos(a),s+n*Math.sin(a)])}else{const u=k(.5,r)-Math.PI/2;h.push([k(o,r)+t+.9*e*Math.cos(u-a),k(o,r)+s+.9*n*Math.sin(u-a)]);const p=2*Math.PI+u-.01;for(let c=u;c<p;c+=a){const f=[k(o,r)+t+e*Math.cos(c),k(o,r)+s+n*Math.sin(c)];l.push(f),h.push(f)}h.push([k(o,r)+t+e*Math.cos(u+2*Math.PI+.5*i),k(o,r)+s+n*Math.sin(u+2*Math.PI+.5*i)]),h.push([k(o,r)+t+.98*e*Math.cos(u+i),k(o,r)+s+.98*n*Math.sin(u+i)]),h.push([k(o,r)+t+.9*e*Math.cos(u+.5*i),k(o,r)+s+.9*n*Math.sin(u+.5*i)])}return[h,l]}function Ft(a,t,s,e,n,o,i,r,l){const h=o+k(.1,l),u=[];u.push([k(r,l)+t+.9*e*Math.cos(h-a),k(r,l)+s+.9*n*Math.sin(h-a)]);for(let p=h;p<=i;p+=a)u.push([k(r,l)+t+e*Math.cos(p),k(r,l)+s+n*Math.sin(p)]);return u.push([t+e*Math.cos(i),s+n*Math.sin(i)]),u.push([t+e*Math.cos(i),s+n*Math.sin(i)]),ut(u,null,l)}function De(a,t,s,e,n,o,i,r){const l=[],h=[r.maxRandomnessOffset||1,(r.maxRandomnessOffset||1)+.3];let u=[0,0];const p=r.disableMultiStroke?1:2,c=r.preserveVertices;for(let f=0;f<p;f++)f===0?l.push({op:"move",data:[i[0],i[1]]}):l.push({op:"move",data:[i[0]+(c?0:k(h[0],r)),i[1]+(c?0:k(h[0],r))]}),u=c?[n,o]:[n+k(h[f],r),o+k(h[f],r)],l.push({op:"bcurveTo",data:[a+k(h[f],r),t+k(h[f],r),s+k(h[f],r),e+k(h[f],r),u[0],u[1]]});return l}function Y(a){return[...a]}function Bt(a,t=0){const s=a.length;if(s<3)throw new Error("A curve must have at least three points.");const e=[];if(s===3)e.push(Y(a[0]),Y(a[1]),Y(a[2]),Y(a[2]));else{const n=[];n.push(a[0],a[0]);for(let r=1;r<a.length;r++)n.push(a[r]),r===a.length-1&&n.push(a[r]);const o=[],i=1-t;e.push(Y(n[0]));for(let r=1;r+2<n.length;r++){const l=n[r];o[0]=[l[0],l[1]],o[1]=[l[0]+(i*n[r+1][0]-i*n[r-1][0])/6,l[1]+(i*n[r+1][1]-i*n[r-1][1])/6],o[2]=[n[r+1][0]+(i*n[r][0]-i*n[r+2][0])/6,n[r+1][1]+(i*n[r][1]-i*n[r+2][1])/6],o[3]=[n[r+1][0],n[r+1][1]],e.push(o[1],o[2],o[3])}}return e}function it(a,t){return Math.pow(a[0]-t[0],2)+Math.pow(a[1]-t[1],2)}function _e(a,t,s){const e=it(t,s);if(e===0)return it(a,t);let n=((a[0]-t[0])*(s[0]-t[0])+(a[1]-t[1])*(s[1]-t[1]))/e;return n=Math.max(0,Math.min(1,n)),it(a,F(t,s,n))}function F(a,t,s){return[a[0]+(t[0]-a[0])*s,a[1]+(t[1]-a[1])*s]}function bt(a,t,s,e){const n=e||[];if((function(r,l){const h=r[l+0],u=r[l+1],p=r[l+2],c=r[l+3];let f=3*u[0]-2*h[0]-c[0];f*=f;let d=3*u[1]-2*h[1]-c[1];d*=d;let g=3*p[0]-2*c[0]-h[0];g*=g;let m=3*p[1]-2*c[1]-h[1];return m*=m,f<g&&(f=g),d<m&&(d=m),f+d})(a,t)<s){const r=a[t+0];n.length?(o=n[n.length-1],i=r,Math.sqrt(it(o,i))>1&&n.push(r)):n.push(r),n.push(a[t+3])}else{const l=a[t+0],h=a[t+1],u=a[t+2],p=a[t+3],c=F(l,h,.5),f=F(h,u,.5),d=F(u,p,.5),g=F(c,f,.5),m=F(f,d,.5),v=F(g,m,.5);bt([l,c,g,v],0,s,n),bt([v,m,d,p],0,s,n)}var o,i;return n}function Ie(a,t){return ct(a,0,a.length,t)}function ct(a,t,s,e,n){const o=n||[],i=a[t],r=a[s-1];let l=0,h=1;for(let u=t+1;u<s-1;++u){const p=_e(a[u],i,r);p>l&&(l=p,h=u)}return Math.sqrt(l)>e?(ct(a,t,h+1,e,o),ct(a,h,s,e,o)):(o.length||o.push(i),o.push(r)),o}function vt(a,t=.15,s){const e=[],n=(a.length-1)/3;for(let o=0;o<n;o++)bt(a,3*o,t,e);return s&&s>0?ct(e,0,e.length,s):e}const q="none";class ft{constructor(t){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*2**31)}_o(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_d(t,s,e){return{shape:t,sets:s||[],options:e||this.defaultOptions}}line(t,s,e,n,o){const i=this._o(o);return this._d("line",[te(t,s,e,n,i)],i)}rectangle(t,s,e,n,o){const i=this._o(o),r=[],l=Ee(t,s,e,n,i);if(i.fill){const h=[[t,s],[t+e,s],[t+e,s+n],[t,s+n]];i.fillStyle==="solid"?r.push(mt([h],i)):r.push(Z([h],i))}return i.stroke!==q&&r.push(l),this._d("rectangle",r,i)}ellipse(t,s,e,n,o){const i=this._o(o),r=[],l=ee(e,n,i),h=kt(t,s,i,l);if(i.fill)if(i.fillStyle==="solid"){const u=kt(t,s,i,l).opset;u.type="fillPath",r.push(u)}else r.push(Z([h.estimatedPoints],i));return i.stroke!==q&&r.push(h.opset),this._d("ellipse",r,i)}circle(t,s,e,n){const o=this.ellipse(t,s,e,e,n);return o.shape="circle",o}linearPath(t,s){const e=this._o(s);return this._d("linearPath",[rt(t,!1,e)],e)}arc(t,s,e,n,o,i,r=!1,l){const h=this._o(l),u=[],p=zt(t,s,e,n,o,i,r,!0,h);if(r&&h.fill)if(h.fillStyle==="solid"){const c=Object.assign({},h);c.disableMultiStroke=!0;const f=zt(t,s,e,n,o,i,!0,!1,c);f.type="fillPath",u.push(f)}else u.push((function(c,f,d,g,m,v,y){const x=c,M=f;let b=Math.abs(d/2),w=Math.abs(g/2);b+=k(.01*b,y),w+=k(.01*w,y);let A=m,P=v;for(;A<0;)A+=2*Math.PI,P+=2*Math.PI;P-A>2*Math.PI&&(A=0,P=2*Math.PI);const S=(P-A)/y.curveStepCount,C=[];for(let E=A;E<=P;E+=S)C.push([x+b*Math.cos(E),M+w*Math.sin(E)]);return C.push([x+b*Math.cos(P),M+w*Math.sin(P)]),C.push([x,M]),Z([C],y)})(t,s,e,n,o,i,h));return h.stroke!==q&&u.push(p),this._d("arc",u,h)}curve(t,s){const e=this._o(s),n=[],o=Wt(t,e);if(e.fill&&e.fill!==q)if(e.fillStyle==="solid"){const i=Wt(t,Object.assign(Object.assign({},e),{disableMultiStroke:!0,roughness:e.roughness?e.roughness+e.fillShapeRoughnessGain:0}));n.push({type:"fillPath",ops:this._mergedShape(i.ops)})}else{const i=[],r=t;if(r.length){const l=typeof r[0][0]=="number"?[r]:r;for(const h of l)h.length<3?i.push(...h):h.length===3?i.push(...vt(Bt([h[0],h[0],h[1],h[2]]),10,(1+e.roughness)/2)):i.push(...vt(Bt(h),10,(1+e.roughness)/2))}i.length&&n.push(Z([i],e))}return e.stroke!==q&&n.push(o),this._d("curve",n,e)}polygon(t,s){const e=this._o(s),n=[],o=rt(t,!0,e);return e.fill&&(e.fillStyle==="solid"?n.push(mt([t],e)):n.push(Z([t],e))),e.stroke!==q&&n.push(o),this._d("polygon",n,e)}path(t,s){const e=this._o(s),n=[];if(!t)return this._d("path",n,e);t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const o=e.fill&&e.fill!=="transparent"&&e.fill!==q,i=e.stroke!==q,r=!!(e.simplification&&e.simplification<1),l=(function(u,p,c){const f=Xt(Jt(St(u))),d=[];let g=[],m=[0,0],v=[];const y=()=>{v.length>=4&&g.push(...vt(v,p)),v=[]},x=()=>{y(),g.length&&(d.push(g),g=[])};for(const{key:b,data:w}of f)switch(b){case"M":x(),m=[w[0],w[1]],g.push(m);break;case"L":y(),g.push([w[0],w[1]]);break;case"C":if(!v.length){const A=g.length?g[g.length-1]:m;v.push([A[0],A[1]])}v.push([w[0],w[1]]),v.push([w[2],w[3]]),v.push([w[4],w[5]]);break;case"Z":y(),g.push([m[0],m[1]])}if(x(),!c)return d;const M=[];for(const b of d){const w=Ie(b,c);w.length&&M.push(w)}return M})(t,1,r?4-4*(e.simplification||1):(1+e.roughness)/2),h=Rt(t,e);if(o)if(e.fillStyle==="solid")if(l.length===1){const u=Rt(t,Object.assign(Object.assign({},e),{disableMultiStroke:!0,roughness:e.roughness?e.roughness+e.fillShapeRoughnessGain:0}));n.push({type:"fillPath",ops:this._mergedShape(u.ops)})}else n.push(mt(l,e));else n.push(Z(l,e));return i&&(r?l.forEach((u=>{n.push(rt(u,!1,e))})):n.push(h)),this._d("path",n,e)}opsToPath(t,s){let e="";for(const n of t.ops){const o=typeof s=="number"&&s>=0?n.data.map((i=>+i.toFixed(s))):n.data;switch(n.op){case"move":e+=`M${o[0]} ${o[1]} `;break;case"bcurveTo":e+=`C${o[0]} ${o[1]}, ${o[2]} ${o[3]}, ${o[4]} ${o[5]} `;break;case"lineTo":e+=`L${o[0]} ${o[1]} `}}return e.trim()}toPaths(t){const s=t.sets||[],e=t.options||this.defaultOptions,n=[];for(const o of s){let i=null;switch(o.type){case"path":i={d:this.opsToPath(o),stroke:e.stroke,strokeWidth:e.strokeWidth,fill:q};break;case"fillPath":i={d:this.opsToPath(o),stroke:q,strokeWidth:0,fill:e.fill||q};break;case"fillSketch":i=this.fillSketch(o,e)}i&&n.push(i)}return n}fillSketch(t,s){let e=s.fillWeight;return e<0&&(e=s.strokeWidth/2),{d:this.opsToPath(t),stroke:s.fill||q,strokeWidth:e,fill:q}}_mergedShape(t){return t.filter(((s,e)=>e===0||s.op!=="move"))}}class qe{constructor(t,s){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new ft(s)}draw(t){const s=t.sets||[],e=t.options||this.getDefaultOptions(),n=this.ctx,o=t.options.fixedDecimalPlaceDigits;for(const i of s)switch(i.type){case"path":n.save(),n.strokeStyle=e.stroke==="none"?"transparent":e.stroke,n.lineWidth=e.strokeWidth,e.strokeLineDash&&n.setLineDash(e.strokeLineDash),e.strokeLineDashOffset&&(n.lineDashOffset=e.strokeLineDashOffset),this._drawToContext(n,i,o),n.restore();break;case"fillPath":{n.save(),n.fillStyle=e.fill||"";const r=t.shape==="curve"||t.shape==="polygon"||t.shape==="path"?"evenodd":"nonzero";this._drawToContext(n,i,o,r),n.restore();break}case"fillSketch":this.fillSketch(n,i,e)}}fillSketch(t,s,e){let n=e.fillWeight;n<0&&(n=e.strokeWidth/2),t.save(),e.fillLineDash&&t.setLineDash(e.fillLineDash),e.fillLineDashOffset&&(t.lineDashOffset=e.fillLineDashOffset),t.strokeStyle=e.fill||"",t.lineWidth=n,this._drawToContext(t,s,e.fixedDecimalPlaceDigits),t.restore()}_drawToContext(t,s,e,n="nonzero"){t.beginPath();for(const o of s.ops){const i=typeof e=="number"&&e>=0?o.data.map((r=>+r.toFixed(e))):o.data;switch(o.op){case"move":t.moveTo(i[0],i[1]);break;case"bcurveTo":t.bezierCurveTo(i[0],i[1],i[2],i[3],i[4],i[5]);break;case"lineTo":t.lineTo(i[0],i[1])}}s.type==="fillPath"?t.fill(n):t.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(t,s,e,n,o){const i=this.gen.line(t,s,e,n,o);return this.draw(i),i}rectangle(t,s,e,n,o){const i=this.gen.rectangle(t,s,e,n,o);return this.draw(i),i}ellipse(t,s,e,n,o){const i=this.gen.ellipse(t,s,e,n,o);return this.draw(i),i}circle(t,s,e,n){const o=this.gen.circle(t,s,e,n);return this.draw(o),o}linearPath(t,s){const e=this.gen.linearPath(t,s);return this.draw(e),e}polygon(t,s){const e=this.gen.polygon(t,s);return this.draw(e),e}arc(t,s,e,n,o,i,r=!1,l){const h=this.gen.arc(t,s,e,n,o,i,r,l);return this.draw(h),h}curve(t,s){const e=this.gen.curve(t,s);return this.draw(e),e}path(t,s){const e=this.gen.path(t,s);return this.draw(e),e}}const at="http://www.w3.org/2000/svg";class Ne{constructor(t,s){this.svg=t,this.gen=new ft(s)}draw(t){const s=t.sets||[],e=t.options||this.getDefaultOptions(),n=this.svg.ownerDocument||window.document,o=n.createElementNS(at,"g"),i=t.options.fixedDecimalPlaceDigits;for(const r of s){let l=null;switch(r.type){case"path":l=n.createElementNS(at,"path"),l.setAttribute("d",this.opsToPath(r,i)),l.setAttribute("stroke",e.stroke),l.setAttribute("stroke-width",e.strokeWidth+""),l.setAttribute("fill","none"),e.strokeLineDash&&l.setAttribute("stroke-dasharray",e.strokeLineDash.join(" ").trim()),e.strokeLineDashOffset&&l.setAttribute("stroke-dashoffset",`${e.strokeLineDashOffset}`);break;case"fillPath":l=n.createElementNS(at,"path"),l.setAttribute("d",this.opsToPath(r,i)),l.setAttribute("stroke","none"),l.setAttribute("stroke-width","0"),l.setAttribute("fill",e.fill||""),t.shape!=="curve"&&t.shape!=="polygon"||l.setAttribute("fill-rule","evenodd");break;case"fillSketch":l=this.fillSketch(n,r,e)}l&&o.appendChild(l)}return o}fillSketch(t,s,e){let n=e.fillWeight;n<0&&(n=e.strokeWidth/2);const o=t.createElementNS(at,"path");return o.setAttribute("d",this.opsToPath(s,e.fixedDecimalPlaceDigits)),o.setAttribute("stroke",e.fill||""),o.setAttribute("stroke-width",n+""),o.setAttribute("fill","none"),e.fillLineDash&&o.setAttribute("stroke-dasharray",e.fillLineDash.join(" ").trim()),e.fillLineDashOffset&&o.setAttribute("stroke-dashoffset",`${e.fillLineDashOffset}`),o}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t,s){return this.gen.opsToPath(t,s)}line(t,s,e,n,o){const i=this.gen.line(t,s,e,n,o);return this.draw(i)}rectangle(t,s,e,n,o){const i=this.gen.rectangle(t,s,e,n,o);return this.draw(i)}ellipse(t,s,e,n,o){const i=this.gen.ellipse(t,s,e,n,o);return this.draw(i)}circle(t,s,e,n){const o=this.gen.circle(t,s,e,n);return this.draw(o)}linearPath(t,s){const e=this.gen.linearPath(t,s);return this.draw(e)}polygon(t,s){const e=this.gen.polygon(t,s);return this.draw(e)}arc(t,s,e,n,o,i,r=!1,l){const h=this.gen.arc(t,s,e,n,o,i,r,l);return this.draw(h)}curve(t,s){const e=this.gen.curve(t,s);return this.draw(e)}path(t,s){const e=this.gen.path(t,s);return this.draw(e)}}var We={canvas:(a,t)=>new qe(a,t),svg:(a,t)=>new Ne(a,t),generator:a=>new ft(a),newSeed:()=>ft.newSeed()};function ze(a){return a.split(/(?=M(?![a-z]))/).map(s=>s.trim()).filter(s=>s!=="")}function Re(a){const t=a.getAttribute("d");return t?ze(t).map(s=>{const e=a.cloneNode();return e.setAttribute("d",s),e}):[]}const ne=800,jt=(a,t,s,e)=>{const n=Math.PI/6,o=-t*Math.cos(n),i=t*Math.sin(n),r=-t*Math.cos(n),l=t*Math.sin(-n),h=document.createElementNS("http://www.w3.org/2000/svg","g");function u(p){for(const c of Array.from(p.children))h.appendChild(c)}if(s==="line")u(a.line(o,i,0,0,e)),u(a.line(r,l,0,0,e));else if(s==="polygon")u(a.polygon([[o,i],[0,0],[r,l]],e));else throw new Error("Invalid arrow head type");return h};function He(a){const{point1:t,point2:s,width:e,headType:n,headSize:o,roughness:i,seed:r,twoWay:l,centerPositionParam:h,animation:u,strokeAnimationClass:p,fillAnimationClass:c}=a,f={...i!==void 0&&{roughness:i},...r!==void 0&&{seed:r}},d=We.svg(document.createElementNS("http://www.w3.org/2000/svg","svg")),g=N(()=>{if(!t.value||!s.value)return null;const M=t.value,b=s.value;if(M.x===b.x&&M.y===b.y)return;const w={...f,stroke:"currentColor",strokeWidth:e};if(h===0){const oe=d.line(M.x,M.y,b.x,b.y,w),At=Math.atan2(b.y-M.y,b.x-M.x)-Math.PI/2;return{svgPath:oe.getElementsByTagName("path")[0],angle1:At,angle2:At,lineLength:Math.hypot(b.x-M.x,b.y-M.y),arcMid:{x:(M.x+b.x)/2,y:(M.y+b.y)/2}}}const A={x:(M.x+b.x)/2,y:(M.y+b.y)/2},P=b.x-M.x,S=b.y-M.y,C=Math.hypot(P,S),E={x:-S/C,y:P/C},R=(1-Math.pow(h,2))*C/(4*h),L={x:A.x+R*E.x,y:A.y+R*E.y},T=Math.sqrt((C/2)**2+R**2),D=Math.atan2(M.y-L.y,M.x-L.x),O=Math.atan2(b.y-L.y,b.x-L.x);let $,W;h>0?($=D,W=O):($=O,W=D),W<$&&(W+=2*Math.PI);const _=h<-1||1<h?1:0,z=h>0?1:0,B=d.path(`M${M.x} ${M.y} A${T} ${T} 0 ${_} ${z} ${b.x} ${b.y}`,w),J=T*Math.sign(R),ae={x:L.x-J*E.x,y:L.y-J*E.y};return{svgPath:B.getElementsByTagName("path")[0],angle1:D,angle2:O,lineLength:T*(W-$),arcMid:ae}});function m(){return g.value==null?0:o??30*Math.log(g.value.lineLength)/Math.log(200)}const v=N(()=>{if(g.value==null||t.value==null||s.value==null)return null;const M=m(),b={...f,stroke:"currentColor",strokeWidth:e,fill:"currentColor",fillStyle:"solid"},w=jt(d,M,n,b);if(w.setAttribute("transform",`translate(${s.value.x},${s.value.y}) rotate(${g.value.angle2*180/Math.PI+(h>=0?90:-90)})`),!l)return{arrowHeadForwardSvg:w,arrowHeadBackwardSvg:null,lineLength:M};const A=jt(d,M,n,b);return A.setAttribute("transform",`translate(${t.value.x},${t.value.y}) rotate(${g.value.angle1*180/Math.PI+(h>=0?-90:90)})`),{arrowHeadBackwardSvg:A,arrowHeadForwardSvg:w,lineLength:M}}),y=N(()=>{const M=document.createElementNS("http://www.w3.org/2000/svg","g");if(g.value==null||v.value==null)return null;const b=g.value.svgPath,w=v.value.arrowHeadBackwardSvg,A=v.value.arrowHeadForwardSvg,P=Re(b);if(P.forEach(S=>M.appendChild(S)),M.appendChild(A),w&&M.appendChild(w),u.value){let S=function(O,$){const W=[],_=[];return O.childNodes.forEach(z=>{if(z instanceof SVGPathElement){const B=z.getAttribute("stroke"),J=z.getAttribute("fill");B&&B!=="none"?W.push(z):J&&J!=="none"&&_.push(z)}}),{strokedPaths:W,filledPaths:_,length:$}};const C=u.value,E=[];E.push({length:g.value.lineLength,strokedPaths:P,filledPaths:[]}),E.push(S(A,v.value.lineLength*2)),w&&E.push(S(w,v.value.lineLength*2));const R=E.map(O=>O.length).reduce((O,$)=>O+$,0),{duration:L=ne,delay:T=0}=C;let D=T;for(const O of E){const $=O.length/R*L,W=$/O.strokedPaths.length;O.strokedPaths.forEach((_,z)=>{const B=D+z/O.strokedPaths.length*$;_.classList.add(p),_.style.animationDuration=`${W}ms`,_.style.animationDelay=`${B}ms`,_.style.strokeDashoffset=`${O.length}`,_.style.strokeDasharray=`${O.length}`,_.style.visibility="hidden"}),D+=$,O.filledPaths.forEach(_=>{_.classList.add(c),_.style.animationDuration=`${$}ms`,_.style.animationDelay=`${D}ms`,_.style.visibility="hidden"})}}return M.innerHTML}),x=N(()=>g.value==null?null:g.value.arcMid);return{arrowSvg:y,textPosition:x}}const Ge={key:1,ref:"wrapper"},Vt=Qt({__name:"ChildElementPicker",emits:["firstChildElementMounted"],setup(a,{emit:t}){wt();const s=t,e=ue(),n=U(),o=()=>{const l=e?.subTree.children;if(l!=null&&Array.isArray(l)){const h=l[0];if(!Ot(h))return;const u=h.children,p=Array.isArray(u)?u[0]:u;if(!Ot(p))return;const c=p.el;if(c==null)return;n.value=c}};Zt(o),ie(o);const i=N(()=>n.value==null?!1:!(n.value instanceof Element)),r=le("wrapper");return he(()=>{i.value?s("firstChildElementMounted",r.value):n.value instanceof Element&&s("firstChildElementMounted",n.value)}),(l,h)=>i.value?(Q(),ot("span",Ge,[tt(l.$slots,"default")],512)):tt(l.$slots,"default",{key:0})}}),Fe=["innerHTML"],Ve=Qt({__name:"FancyArrow",props:{from:{},to:{},q1:{},q2:{},id1:{},id2:{},pos1:{},pos2:{},x1:{},y1:{},x2:{},y2:{},width:{},color:{},twoWay:{type:Boolean},arc:{},headType:{},headSize:{},roughness:{},seed:{},static:{type:Boolean},duration:{},delay:{},animationDuration:{},animationDelay:{}},setup(a){wt();const t=a,s=N(()=>t.duration??t.animationDuration),e=N(()=>t.delay??t.animationDelay),n=U(),o=N(()=>n.value?.closest(".slidev-page")??void 0),i=U(),r=ce(),l=U(),h=U();function u(P){l.value=P??void 0}function p(P){h.value=P??void 0}const c=N(()=>{if(r.tail!=null)return{element:l.value,snapPosition:void 0};const S=_t({shorthand:t.from,q:t.q1,id:t.id1,pos:t.pos1,x:t.x1,y:t.y1});return S==null?{element:n.value?.previousElementSibling??void 0,snapPosition:void 0}:"query"in S?m(S):S}),f=N(()=>{if(r.head!=null)return{element:h.value,snapPosition:void 0};const S=_t({shorthand:t.to,q:t.q2,id:t.id2,pos:t.pos2,x:t.x2,y:t.y2});return S==null?{element:n.value?.nextElementSibling??void 0,snapPosition:void 0}:"query"in S?m(S):S}),{isPrintMode:d}=pe(),g=Ut();function m(P){if(!d.value&&!g.value)return;const S=o.value?.querySelector(P.query)??void 0;return S==null&&console.warn(`Element not found for query: ${P.query}`),{element:S,snapPosition:P.snapPosition}}const v=It(i,c),y=It(i,f),x=qt(v,y),M=qt(y,v),b=N(()=>d.value?!1:t.static!==!0),{arrowSvg:w,textPosition:A}=He({point1:x,point2:M,width:Number(t.width??2),twoWay:t.twoWay??!1,centerPositionParam:Number(t.arc??0),headType:t.headType??"line",headSize:t.headSize?Number(t.headSize):null,roughness:t.roughness?Number(t.roughness):void 0,seed:t.seed?Number(t.seed):void 0,animation:N(()=>b.value?{duration:s.value!=null?Number(s.value):void 0,delay:e.value!=null?Number(e.value):void 0}:void 0),strokeAnimationClass:"animated-rough-arrow-stroke",fillAnimationClass:"animated-rough-arrow-fill"});return(P,S)=>(Q(),ot("div",{ref_key:"root",ref:n,style:{display:"contents"}},[j(`
    "display: contents" ensures the root element doesn't affect the layout
    so that the positions of the elements injected into the slots are not
    affected by the root element.
  `),j(`
    Place these slots before the main SVG arrow
    so that the SVG arrow is placed in front of the elements in the slots.
    `),G(r).tail?(Q(),Ct(Vt,{key:0,onFirstChildElementMounted:u},{default:Lt(()=>[tt(P.$slots,"tail")]),_:3})):j("v-if",!0),G(r).head?(Q(),Ct(Vt,{key:1,onFirstChildElementMounted:p},{default:Lt(()=>[tt(P.$slots,"head")]),_:3})):j("v-if",!0),(Q(),ot("svg",{ref_key:"svgContainer",ref:i,class:$t(t.color?`text-${t.color}`:""),style:{position:"absolute",top:"0",left:"0",width:"1px",height:"1px",overflow:"visible"}},[j(" eslint-disable-next-line vue/no-v-html "),fe("g",{innerHTML:G(w)},null,8,Fe)],2)),P.$slots.default&&G(A)?(Q(),ot("div",{key:2,class:$t({"animated-rough-arrow-content":b.value}),style:de({position:"absolute",left:`${G(A).x}px`,top:`${G(A).y}px`,transform:"translate(-50%, -50%)",...b.value&&{animationDuration:`${s.value??G(ne)}ms`,animationDelay:`${e.value??0}ms`,visibility:"hidden"}})},[tt(P.$slots,"default")],6)):j("v-if",!0)],512))}});export{Ve as _};
